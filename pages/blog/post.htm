title = "Blog Post"
url = "/:slug"
layout = "default"
description = "Viewing a single blog post"
hidden = "0"

[blogPost]
slug = "{{ :slug }}"
categoryPage = "blog/tag"
==
<?php
function onEnd()
{
  if (isset($this['post'])) {
    $this->page->title = $this->post->title;
    $this->page->description = $this->post->excerpt;
  }
  else {
    return $this->controller->run('/404');
  }
}
?>
==
{% set post = blogPost.post %}

<article class="blog-post" itemscope itemtype="https://schema.org/BlogPosting">

  <header class="blog-header">

    <h1 class="content-heading" itemprop="headline">{{ post.title }}</h1>

    {% for image in post.featured_images %}

      <img class="blog-featured-image" src="{{ image.path }}" alt="{{ image.description }}" itemprop="image">

    {% endfor %}

    {% if post.excerpt %}

      <p class="lead blog-excerpt" itemprop="description">{{ post.excerpt }}</p>

    {% endif %}

  </header>

  <div class="markdown-body" itemprop="articleBody">
    {{ post.content_html|raw }}
  </div>

  <footer class="blog-footer">
    <hr>
    <p class="info">
        Posted
        {% if post.categories.count %} in
            <span itemprop="keywords">
              {% for category in post.categories %}
                  <a href="{{ category.url }}">{{ category.name }}</a>{% if not loop.last %}, {% endif %}
              {% endfor %}
            </span>
        {% endif %}
        on <time itemprop="datePublished" datetime="{{ post.published_at|date('Y-m-d') }}">{{ post.published_at|date('M d, Y') }}</time>
        by <span itemprop="author">{{ post.user.full_name }}</span>
    </p>
  </footer>

</article>
